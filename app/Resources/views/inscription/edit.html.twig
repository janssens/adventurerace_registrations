{% extends 'base.html.twig' %}

{% form_theme edit_form _self %}

{% block file_widget %}
    {% spaceless %}

        {% if file_url is not null %}
            <div>
                <a href="/{{ file_url }}" {% if file_url|ext|ext_type == 'image' %}data-toggle="lightbox"{% endif %}><i class="fa fa-fw fa-file-{{ file_url|ext|ext_type }}-o"></i>/{{ file_url }}</a>
                &nbsp;<a href="#" class="toggle btn btn-default btn-sm">Changer</a>
            </div>
            <div id="file_field" style="display:none">
                {{ block('form_widget') }}
                <a href="#" class="toggle btn btn-danger">Annuler</a>
            </div>
        {% else %}
            {{ block('form_widget') }}
        {% endif %}

    {% endspaceless %}
{% endblock %}

{% block body %}
    <h1>Inscription edit</h1>

    {{ form_start(edit_form) }}
        {{ form_row(edit_form.title) }}
    {% if is_granted("ROLE_ADMIN") %}
        <hr>
        {{ form_row(edit_form.status) }}
        {{ form_row(edit_form.payement_status) }}
        {{ form_row(edit_form.admin_comment) }}
        <hr>
    {% endif %}
        {{ form_widget(edit_form) }}
    {{ form_end(edit_form) }}

    <hr>
            <a href="{{ path('race_show',{"slug":inscription.race.slug}) }}" class="btn btn-default"><i class="fa fa-fw fa-chevron-left"></i>Retour Ã  la course</a>
            {% if is_granted("ROLE_ADMIN") %}
                {% if inscription.race.event.owner == app.user %}
                    {{ form_start(delete_form) }}
                        <input type="submit" value="Supprimer" class="btn btn-danger">
                    {{ form_end(delete_form) }}
                {% endif %}
            {% endif %}
{% endblock %}
